<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vinfotech Chat Widget - Advanced Example</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    .hero {
      background: white;
      border-radius: 16px;
      padding: 60px 40px;
      margin-bottom: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }
    h1 {
      color: #333;
      font-size: 2.5em;
      margin-bottom: 20px;
    }
    .controls {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }
    button {
      background: #00B46A;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin: 5px;
      transition: all 0.3s;
    }
    button:hover {
      background: #00964F;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 180, 106, 0.4);
    }
    .info {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #00B46A;
    }
    code {
      background: #e9ecef;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="hero">
      <h1>ğŸš€ Advanced Widget Integration</h1>
      <p>This example demonstrates advanced features including programmatic control, custom theming, and event handling.</p>

      <div class="info">
        <strong>ğŸ’¡ Try these features:</strong>
        <ul>
          <li>Use the buttons below to control the widget programmatically</li>
          <li>Switch between different themes</li>
          <li>Monitor events in the browser console</li>
          <li>See custom branding in action</li>
        </ul>
      </div>
    </div>

    <div class="controls">
      <h2>Widget Controls</h2>
      <button onclick="openWidget()">ğŸ“– Open Widget</button>
      <button onclick="closeWidget()">âŒ Close Widget</button>
      <button onclick="toggleTheme()">ğŸ¨ Toggle Theme</button>
      <button onclick="updateBranding()">ğŸ·ï¸ Update Branding</button>
      <button onclick="destroyWidget()">ğŸ’¥ Destroy Widget</button>
      <button onclick="reinitWidget()">ğŸ”„ Reinitialize</button>

      <div class="info" style="margin-top: 20px;">
        <strong>Current State:</strong>
        <div id="widget-status">Initializing...</div>
      </div>
    </div>
  </div>

  <!-- Load the Vinfotech Chat Widget -->
  <link rel="stylesheet" href="../dist/vinfotech-chat-widget.css">
  <script src="../dist/vinfotech-chat-widget.umd.js"></script>

  <script>
    let currentTheme = 'light';
    let widget = null;

    // Advanced configuration
    const baseConfig = {
      apiUrl: 'https://ai-api.vinfotech.com/api',
      userId: 'advanced_demo_user',
      teamId: 'advanced_demo_team',

      theme: {
        primaryColor: '#667eea',
        mode: 'light'
      },

      branding: {
        companyName: 'Advanced Demo',
        showPoweredBy: true,
        poweredByText: 'âš¡ Powered by Vinfotech AI'
      },

      behavior: {
        autoOpen: false,
        defaultState: 'collapsed',
        mobileFullscreen: true
      },

      messages: {
        welcomeMessage: 'ğŸ‘‹ Welcome! I\'m your advanced AI assistant.',
        placeholderText: 'Type your message here...',
        errorMessage: 'ğŸ˜” Oops! Something went wrong. Please try again.'
      },

      suggestions: {
        enabled: true,
        fallbackQuestions: [
          'ğŸ¤– What are your advanced AI capabilities?',
          'ğŸ’¼ How can you integrate with my business?',
          'ğŸ¯ What makes you different?'
        ]
      },

      privacy: {
        enableLocalStorage: true,
        sessionTtlMinutes: 120
      },

      analytics: {
        enabled: true,
        trackEvents: true
      },

      callbacks: {
        onOpen: function() {
          console.log('âœ… Widget opened');
          updateStatus('Widget is open');
        },
        onClose: function() {
          console.log('âŒ Widget closed');
          updateStatus('Widget is closed');
        },
        onMessage: function(message) {
          console.log('ğŸ’¬ User message:', message);
          updateStatus('User sent: ' + message.substring(0, 30) + '...');
        },
        onError: function(error) {
          console.error('â— Widget error:', error);
          updateStatus('Error: ' + error.message);
        }
      }
    };

    // Initialize the widget
    function initWidget() {
      if (window.VinfotechChatWidget) {
        window.VinfotechChatWidget.init(baseConfig);
        widget = window.VinfotechChatWidget;
        updateStatus('Widget initialized and ready');
      }
    }

    // Control functions
    function openWidget() {
      if (widget) {
        widget.open();
        console.log('ğŸ“– Opening widget...');
      }
    }

    function closeWidget() {
      if (widget) {
        widget.close();
        console.log('âŒ Closing widget...');
      }
    }

    function toggleTheme() {
      currentTheme = currentTheme === 'light' ? 'dark' : 'light';
      if (widget) {
        widget.updateConfig({
          theme: {
            mode: currentTheme
          }
        });
        console.log('ğŸ¨ Theme switched to:', currentTheme);
        updateStatus('Theme: ' + currentTheme);
      }
    }

    function updateBranding() {
      const colors = ['#667eea', '#00B46A', '#f56565', '#ed8936', '#4299e1'];
      const randomColor = colors[Math.floor(Math.random() * colors.length)];

      if (widget) {
        widget.updateConfig({
          theme: {
            primaryColor: randomColor
          },
          branding: {
            companyName: 'Custom Brand ' + Math.floor(Math.random() * 100)
          }
        });
        console.log('ğŸ·ï¸ Updated branding with color:', randomColor);
        updateStatus('Updated to color: ' + randomColor);
      }
    }

    function destroyWidget() {
      if (widget) {
        widget.destroy();
        widget = null;
        console.log('ğŸ’¥ Widget destroyed');
        updateStatus('Widget destroyed');
      }
    }

    function reinitWidget() {
      destroyWidget();
      setTimeout(() => {
        initWidget();
        console.log('ğŸ”„ Widget reinitialized');
      }, 500);
    }

    function updateStatus(message) {
      const statusEl = document.getElementById('widget-status');
      if (statusEl) {
        statusEl.innerHTML = `<code>${message}</code> <small>(${new Date().toLocaleTimeString()})</small>`;
      }
    }

    // Initialize on page load
    window.addEventListener('DOMContentLoaded', initWidget);
  </script>
</body>
</html>
